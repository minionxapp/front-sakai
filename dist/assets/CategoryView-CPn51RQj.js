import{s as j,a as $}from"./index-CsoTg65Q.js";import{a as q,s as E}from"./index-CH10GLm3.js";import{s as w}from"./index-b2JWK6NW.js";import{a as G,b as H}from"./index-8i4r_lkt.js";import{a as V}from"./index-CEw_tE3c.js";import{s as K}from"./index-BLcsYzw6.js";import{o as C,k as S,u,v as l,j as o,K as z,A as v,D as Y,L as b,h as x,z as D,t as J,p as Q,N as W}from"./index-BH_KByX2.js";import"./index-z3CEPeVG.js";const X={__name:"CrudHeader",emits:["openForm"],setup(f,{emit:m}){return(s,i)=>{const t=w,d=j;return C(),S(d,{class:"mb-6"},{start:u(()=>[l(t,{label:"New",icon:"pi pi-plus",severity:"secondary",class:"mr-2",onClick:i[0]||(i[0]=p=>s.$emit("openForm"))})]),end:u(()=>[l(t,{label:"Export",icon:"pi pi-upload",severity:"secondary",onClick:i[1]||(i[1]=p=>s.exportCSV(p))})]),_:1})}}},Z={class:"flex flex-col gap-6"},ee={__name:"CategoryForm",props:{dialog:Boolean,action:String,data:{type:Object}},emits:["closeDialog","simpanData","handleSubmit"],setup(f,{emit:m}){const s=f;return(i,t)=>{const d=V,p=w,n=$;return C(),S(n,{visible:s.dialog,"onUpdate:visible":t[4]||(t[4]=r=>s.dialog=r),style:{width:"450px"},header:"Myaset Details",modal:!0},{footer:u(()=>[l(p,{label:"Cancel",icon:"pi pi-times",text:"",onClick:t[2]||(t[2]=r=>i.$emit("closeDialog",f.data))}),l(p,{label:"Save",icon:"pi pi-check",onClick:t[3]||(t[3]=r=>i.$emit("handleSubmit",f.data))})]),default:u(()=>[o("div",Z,[o("div",null,[t[5]||(t[5]=o("label",{for:"name",class:"block font-bold mb-3"},"Label",-1)),l(d,{id:"name",modelValue:s.data.label,"onUpdate:modelValue":t[0]||(t[0]=r=>s.data.label=r),modelModifiers:{trim:!0},required:"true",fluid:""},null,8,["modelValue"])]),o("div",null,[t[6]||(t[6]=o("label",{for:"value",class:"block font-bold mb-3"},"Value",-1)),l(d,{id:"Value",modelValue:s.data.value,"onUpdate:modelValue":t[1]||(t[1]=r=>s.data.value=r),modelModifiers:{trim:!0},required:"true",fluid:""},null,8,["modelValue"])])])]),_:1},8,["visible"])}}},te={class:"card"},le={class:"flex flex-wrap gap-2 items-center justify-between"},ae={class:"flex items-center gap-4"},oe={key:0},pe={__name:"CategoryView",setup(f){const m=z(),s=v(),i=v(!1),t=v(!1),d=v(""),p=v(),n=v({}),r=v({global:{value:null,matchMode:W.CONTAINS}}),F=()=>{i.value=!0,d.value="new",P()},P=()=>{n.value={}},k=a=>{i.value=!1};Y(()=>{_()});const _=async()=>{try{const{data:a}=await b.get("/category");p.value=a.data}catch(a){console.log(a)}};function N(a){d.value="edit",n.value={...a},i.value=!0}async function T(a){n.value=a,t.value=!0}const B=async()=>{try{console.log(n.value);const a=await b.delete("/category/"+n.value._id);t.value=!1,n.value={},m.add({severity:"success",summary:"Successful",detail:"category Deleted sukses",life:3e3}),_()}catch{m.add({severity:"danger",summary:"Successful",detail:"category Deleted Gagal",life:3e3})}},L=async a=>{if(d.value=="new")try{const e=await b.post("/category",{label:a.label,value:a.value});m.add({severity:"success",summary:"Successful",detail:"Category Created",life:8e3}),k()}catch{m.add({severity:"danger",summary:"Failed",detail:"Category Fail ",life:8e3})}else try{const e=await b.put("/category/"+a._id,{label:a.label,value:a.value});m.add({severity:"success",summary:"Successful",detail:"Update Berhasil",life:8e3}),k()}catch{m.add({severity:"danger",summary:"Failed",detail:"Update  Gagal ",life:8e3})}_()};return(a,e)=>{const M=K,U=G,I=V,h=H,g=E,y=w,A=q,O=$;return C(),x("div",null,[l(M),e[9]||(e[9]=o("h1",null," Category ",-1)),o("div",te,[l(X,{onOpenForm:F}),l(ee,{dialog:i.value,action:d.value,data:n.value,onCloseDialog:k,onHandleSubmit:L},null,8,["dialog","action","data"]),l(A,{ref:"dt",selection:s.value,"onUpdate:selection":e[1]||(e[1]=c=>s.value=c),value:p.value,dataKey:"id",paginator:!0,rows:10,filters:r.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} categories"},{header:u(()=>[o("div",le,[e[5]||(e[5]=o("h4",{class:"m-0"},null,-1)),l(h,null,{default:u(()=>[l(U,null,{default:u(()=>e[4]||(e[4]=[o("i",{class:"pi pi-search"},null,-1)])),_:1}),l(I,{modelValue:r.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=c=>r.value.global.value=c),placeholder:"Search..."},null,8,["modelValue"])]),_:1})])]),default:u(()=>[l(g,{selectionMode:"multiple",style:{width:"3rem"},exportable:!1}),l(g,{field:"label",header:"Label",sortable:"",style:{"min-width":"12rem"}}),l(g,{field:"value",header:"Value",sortable:"",style:{"min-width":"10rem"}}),l(g,{exportable:!1,style:{"min-width":"12rem"},header:"Action"},{body:u(c=>[l(y,{icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:R=>N(c.data)},null,8,["onClick"]),l(y,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:R=>T(c.data)},null,8,["onClick"])]),_:1})]),_:1},8,["selection","value","filters"]),l(O,{visible:t.value,"onUpdate:visible":e[3]||(e[3]=c=>t.value=c),style:{width:"450px"},header:"Confirm",modal:!0},{footer:u(()=>[l(y,{label:"No",icon:"pi pi-times",text:"",onClick:e[2]||(e[2]=c=>t.value=!1)}),l(y,{label:"Yes",icon:"pi pi-check",onClick:B})]),default:u(()=>[o("div",ae,[e[8]||(e[8]=o("i",{class:"pi pi-exclamation-triangle !text-3xl"},null,-1)),n.value?(C(),x("span",oe,[e[6]||(e[6]=D("Are you sure you want to delete ")),o("b",null,J(n.value.name),1),e[7]||(e[7]=D("?"))])):Q("",!0)])]),_:1},8,["visible"])])])}}};export{pe as default};
